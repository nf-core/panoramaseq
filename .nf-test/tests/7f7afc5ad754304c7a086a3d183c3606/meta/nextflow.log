Jun-24 13:06:46.464 [main] DEBUG nextflow.cli.Launcher - $> nextflow -log /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/meta/nextflow.log run /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test-7f7afc5ad754304c7a086a3d183c3606.nf -c /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config -c /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/tests/nextflow.config -params-file /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/meta/params.json -ansi-log false -profile test -with-trace /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/meta/trace.csv -w /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work
Jun-24 13:06:46.733 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 24.10.2
Jun-24 13:06:46.754 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/user/gent/446/vsc44685/.nextflow/plugins; core-plugins: nf-amazon@2.9.2,nf-azure@1.10.2,nf-cloudcache@0.4.2,nf-codecommit@0.2.2,nf-console@1.1.4,nf-google@1.15.2,nf-tower@1.9.3,nf-wave@1.7.4
Jun-24 13:06:46.845 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Jun-24 13:06:46.846 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Jun-24 13:06:46.849 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.12.0 in 'deployment' mode
Jun-24 13:06:46.860 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Jun-24 13:06:46.942 [main] DEBUG nextflow.config.ConfigBuilder - Found config base: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config
Jun-24 13:06:46.946 [main] DEBUG nextflow.config.ConfigBuilder - User config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config
Jun-24 13:06:46.946 [main] DEBUG nextflow.config.ConfigBuilder - User config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/tests/nextflow.config
Jun-24 13:06:46.947 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config
Jun-24 13:06:46.948 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config
Jun-24 13:06:46.948 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/tests/nextflow.config
Jun-24 13:06:46.973 [main] DEBUG n.secret.LocalSecretsProvider - Secrets store: /user/gent/446/vsc44685/.nextflow/secrets/store.json
Jun-24 13:06:47.031 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@6e28bb87] - activable => nextflow.secret.LocalSecretsProvider@6e28bb87
Jun-24 13:06:47.054 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `test`
Jun-24 13:06:52.168 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `test`
Jun-24 13:06:53.449 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `test`
Jun-24 13:06:53.642 [main] DEBUG nextflow.config.ConfigBuilder - Available config profiles: [bih, cfc_dev, uzl_omics, ifb_core, embl_hd, denbi_qbic, alice, mjolnir_globe, uppmax, giga, incliva, ilifu, ki_luria, uge, icr_alma, rosalind_uge, lugh, mccleary, unibe_ibu, vai, czbiohub_aws, jax, roslin, tes, scw, unc_longleaf, tigem, tubingen_apg, google, apollo, ipop_up, vsc_calcua, pdc_kth, googlels, ceci_nic5, ccga_cau, humantechnopole, stjude, daisybio, eddie, medair, biowulf, apptainer, bi, bigpurple, adcra, cedars, pawsey_setonix, vsc_kul_uhasselt, pawsey_nimbus, ucl_myriad, utd_ganymede, charliecloud, fred_hutch, seattlechildrens, icr_davros, ceres, arm, munin, rosalind, hasta, cfc, uzh, shu_bmrc, ebi_codon_slurm, ebc, ccga_dx, crick, ku_sund_danhead, marvin, shifter, biohpc_gen, mana, mamba, york_viking, unc_lccc, wehi, awsbatch, wustl_htcf, arcc, ceci_dragon2, imperial, maestro, test_local, software_license, cannon, genotoul, nci_gadi, abims, janelia, nu_genomics, googlebatch, oist, sahmri, kaust, alliance_canada, mpcdf, leicester, vsc_ugent, create, sage, cambridge, jex, podman, ebi_codon, cheaha, xanadu, nyu_hpc, test, marjorie, computerome, ucd_sonic, seg_globe, mssm, sanger, dkfz, bluebear, pasteur, einstein, ethz_euler, m3c, test_full, imb, ucl_cscluster, tuos_stanage, azurebatch, hki, seadragon, crukmi, csiro_petrichor, qmul_apocrita, wave, docker, engaging, gis, hypatia, psmn, eva, unity, cropdiversityhpc, nygc, fgcz, conda, crg, singularity, test_s3, mpcdf_viper, pe2, self_hosted_runner, tufts, uw_hyak_pedslabs, binac2, debug, genouest, cbe, unsw_katana, utd_juno, gitpod, phoenix, seawulf, uod_hpc, fub_curta, uct_hpc, aws_tower, binac, fsu_draco]
Jun-24 13:06:53.832 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declaration
Jun-24 13:06:53.848 [main] INFO  nextflow.cli.CmdRun - Launching `/kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test-7f7afc5ad754304c7a086a3d183c3606.nf` [deadly_legentil] DSL2 - revision: 3a3713a948
Jun-24 13:06:53.849 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins declared=[nf-schema@2.2.0]
Jun-24 13:06:53.850 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Jun-24 13:06:53.850 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[nf-schema@2.2.0]
Jun-24 13:06:53.850 [main] DEBUG nextflow.plugin.PluginUpdater - Installing plugin nf-schema version: 2.2.0
Jun-24 13:06:53.935 [main] INFO  org.pf4j.AbstractPluginManager - Plugin 'nf-schema@2.2.0' resolved
Jun-24 13:06:53.936 [main] INFO  org.pf4j.AbstractPluginManager - Start plugin 'nf-schema@2.2.0'
Jun-24 13:06:53.943 [main] DEBUG nextflow.plugin.BasePlugin - Plugin started nf-schema@2.2.0
Jun-24 13:06:54.050 [main] DEBUG nextflow.Session - Session UUID: 1f6c4f40-367e-4866-9d4c-5685b37b783b
Jun-24 13:06:54.051 [main] DEBUG nextflow.Session - Run name: deadly_legentil
Jun-24 13:06:54.051 [main] DEBUG nextflow.Session - Executor pool size: 16
Jun-24 13:06:54.057 [main] DEBUG nextflow.file.FilePorter - File porter settings maxRetries=3; maxTransfers=50; pollTimeout=null
Jun-24 13:06:54.061 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=48; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Jun-24 13:06:54.231 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 24.10.2 build 5932
  Created: 27-11-2024 21:23 UTC (22:23 CEST)
  System: Linux 5.14.0-427.66.1.el9_4.x86_64
  Runtime: Groovy 4.0.23 on OpenJDK 64-Bit Server VM 21.0.5+11-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 979295@gligar09.gastly.os [10.141.10.69]
  CPUs: 16 - Mem: 62.3 GB (9.3 GB) - Swap: 20 GB (19.9 GB)
Jun-24 13:06:54.346 [main] DEBUG nextflow.Session - Work-dir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work [gpfs]
Jun-24 13:06:54.436 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[]
Jun-24 13:06:54.444 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Jun-24 13:06:54.534 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Jun-24 13:06:54.542 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 17; maxThreads: 1000
Jun-24 13:06:54.631 [main] DEBUG nextflow.Session - Session start
Jun-24 13:06:54.633 [main] DEBUG nextflow.trace.TraceFileObserver - Workflow started -- trace file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/meta/trace.csv
Jun-24 13:06:55.237 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Jun-24 13:06:56.539 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:gpu_process` matches labels `gpu_process` for process with name Decode_batch
Jun-24 13:06:56.542 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:Decode_batch` matches process Decode_batch
Jun-24 13:06:56.563 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jun-24 13:06:56.564 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jun-24 13:06:56.634 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Jun-24 13:06:56.640 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=16; memory=62.3 GB; capacity=16; pollInterval=100ms; dumpInterval=5m
Jun-24 13:06:56.642 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: local)
Jun-24 13:06:56.770 [main] DEBUG nextflow.Session - Config process names validation disabled as requested
Jun-24 13:06:56.771 [main] DEBUG nextflow.Session - Igniting dataflow network (1)
Jun-24 13:06:56.771 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > Decode_batch
Jun-24 13:06:56.832 [main] DEBUG nextflow.script.ScriptRunner - Parsed script files:
  Script_16d9520233b78724: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/modules/local/Decoding/tests/../main.nf
  Script_7dbd3bb93aff494f: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test-7f7afc5ad754304c7a086a3d183c3606.nf
Jun-24 13:06:56.832 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Jun-24 13:06:56.832 [main] DEBUG nextflow.Session - Session await
Jun-24 13:06:57.032 [FileTransfer-1] DEBUG nextflow.file.FilePorter - Copying foreign file https://raw.githubusercontent.com/francops1722/test-datasets/panoramaseq/testdata/decode/S09.umi_extract_1.fastq.gz to work dir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/stage-1f6c4f40-367e-4866-9d4c-5685b37b783b/a9/88776648f2d275ece3bfe75ee8acde/S09.umi_extract_1.fastq.gz
Jun-24 13:06:57.032 [FileTransfer-2] DEBUG nextflow.file.FilePorter - Copying foreign file https://raw.githubusercontent.com/francops1722/test-datasets/panoramaseq/testdata/decode/S09.umi_extract_2.fastq.gz to work dir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/stage-1f6c4f40-367e-4866-9d4c-5685b37b783b/f0/0a0c276c3296005b95c14b9bedbd67/S09.umi_extract_2.fastq.gz
Jun-24 13:06:57.033 [FileTransfer-3] DEBUG nextflow.file.FilePorter - Copying foreign file https://raw.githubusercontent.com/francops1722/test-datasets/panoramaseq/testdata/barcodes_coords.csv to work dir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/stage-1f6c4f40-367e-4866-9d4c-5685b37b783b/d3/6e0b6b998c299aee8601ee39118df7/barcodes_coords.csv
Jun-24 13:06:57.200 [Actor Thread 10] DEBUG nextflow.container.SingularityCache - Singularity found local store for image=docker://pytorch/pytorch:2.7.1-cuda11.8-cudnn9-runtime; path=/user/gent/446/vsc44685/ScratchVO_dir/apptainer_cache/pytorch-pytorch-2.7.1-cuda11.8-cudnn9-runtime.img
Jun-24 13:06:57.348 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-24 13:06:57.350 [Task submitter] INFO  nextflow.Session - [e3/3fedb1] Submitted process > Decode_batch (S09_real)
Jun-24 13:07:08.586 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: Decode_batch (S09_real); status: COMPLETED; exit: 1; error: -; workDir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/e3/3fedb1a538736402b94ded9351b7db]
Jun-24 13:07:08.587 [Task monitor] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'TaskFinalizer' minSize=10; maxSize=48; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Jun-24 13:07:08.596 [TaskFinalizer-1] DEBUG nextflow.processor.TaskProcessor - Handling unexpected condition for
  task: name=Decode_batch (S09_real); work-dir=/kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/e3/3fedb1a538736402b94ded9351b7db
  error [nextflow.exception.ProcessFailedException]: Process `Decode_batch (S09_real)` terminated with an error exit status (1)
Jun-24 13:07:08.610 [TaskFinalizer-1] ERROR nextflow.processor.TaskProcessor - Error executing process > 'Decode_batch (S09_real)'

Caused by:
  Process `Decode_batch (S09_real)` terminated with an error exit status (1)


Command executed:

  echo CUDA_VISIBLE_DEVICES=${CUDA_VISIBLE_DEVICES:-}
      python -c "import torch; print('torch.cuda.is_available():', torch.cuda.is_available())"
      Demux2_batch.py -R1 S09.umi_extract_1.fastq.gz -R2 S09.umi_extract_2.fastq.gz -N 34500 -M 36 -B barcodes_coords.csv --Ntriage 100 --Nthresh 9 --out-prefix S09_real -C 0 --Seg_id 1/1 &
  pid0=$!
      wait $pid0
      cat *1_R1.fastq.gz > S09_real.decode.R1.fastq.gz
      cat *1_R2.fastq.gz > S09_real.decode.R2.fastq.gz
      rm -f *1_R1.fastq.gz *1_R2.fastq.gz
      
      cat <<-END_VERSIONS > versions.yml
      "Decode_batch":
          python: $(python --version | sed 's/Python //')
          torch: $(python -c "import torch; print(torch.__version__)")
  END_VERSIONS

Command exit status:
  1

Command output:
  CUDA_VISIBLE_DEVICES=
  torch.cuda.is_available(): False
  Defining Functions
  popcll_torch not found, so using slower popcount
  all functions now defined.
  all functions now defined.
  arguments parsed
  finished making code auxilliary tables, now pickling
  moving to CUDA device

Command error:
  INFO:    Environment variable SINGULARITYENV_NXF_TASK_WORKDIR is set, but APPTAINERENV_NXF_TASK_WORKDIR is preferred
  INFO:    Environment variable SINGULARITYENV_NXF_DEBUG is set, but APPTAINERENV_NXF_DEBUG is preferred
  CUDA_VISIBLE_DEVICES=
  torch.cuda.is_available(): False
  Defining Functions
  popcll_torch not found, so using slower popcount
  all functions now defined.
  all functions now defined.
  arguments parsed
  finished making code auxilliary tables, now pickling
  moving to CUDA device
  Traceback (most recent call last):
    File "/kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/bin/Demux2_batch.py", line 269, in <module>
      raise RuntimeError("Required GPU not found! Exiting.")
  RuntimeError: Required GPU not found! Exiting.

Work dir:
  /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/e3/3fedb1a538736402b94ded9351b7db

Container:
  /user/gent/446/vsc44685/ScratchVO_dir/apptainer_cache/pytorch-pytorch-2.7.1-cuda11.8-cudnn9-runtime.img

Tip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`
Jun-24 13:07:08.615 [main] DEBUG nextflow.Session - Session await > all processes finished
Jun-24 13:07:08.621 [TaskFinalizer-1] INFO  nextflow.Session - Execution cancelled -- Finishing pending tasks before exit
Jun-24 13:07:08.631 [Task monitor] DEBUG n.processor.TaskPollingMonitor - <<< barrier arrives (monitor: local) - terminating tasks monitor poll loop
Jun-24 13:07:08.631 [main] DEBUG nextflow.Session - Session await > all barriers passed
Jun-24 13:07:08.633 [main] DEBUG nextflow.util.ThreadPoolManager - Thread pool 'TaskFinalizer' shutdown completed (hard=false)
Jun-24 13:07:08.641 [main] DEBUG n.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=22.3s; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=2; peakMemory=3 GB; ]
Jun-24 13:07:08.642 [main] DEBUG nextflow.trace.TraceFileObserver - Workflow completed -- saving trace file
Jun-24 13:07:08.643 [main] DEBUG nextflow.trace.ReportObserver - Workflow completed -- rendering execution report
Jun-24 13:07:09.271 [main] DEBUG nextflow.trace.TimelineObserver - Workflow completed -- rendering execution timeline
Jun-24 13:07:09.453 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Jun-24 13:07:09.462 [main] INFO  org.pf4j.AbstractPluginManager - Stop plugin 'nf-schema@2.2.0'
Jun-24 13:07:09.463 [main] DEBUG nextflow.plugin.BasePlugin - Plugin stopped nf-schema
Jun-24 13:07:09.464 [main] DEBUG nextflow.util.ThreadPoolManager - Thread pool 'FileTransfer' shutdown completed (hard=false)
Jun-24 13:07:09.464 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
