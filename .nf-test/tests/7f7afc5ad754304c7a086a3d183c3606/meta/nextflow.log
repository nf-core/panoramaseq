Jul-02 09:59:47.896 [main] DEBUG nextflow.cli.Launcher - $> nextflow -log /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/meta/nextflow.log run /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test-7f7afc5ad754304c7a086a3d183c3606.nf -c /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config -c /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/tests/nextflow.config -params-file /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/meta/params.json -ansi-log false -profile test -with-trace /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/meta/trace.csv -w /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work
Jul-02 09:59:47.952 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 24.10.2
Jul-02 09:59:47.969 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/user/gent/446/vsc44685/.nextflow/plugins; core-plugins: nf-amazon@2.9.2,nf-azure@1.10.2,nf-cloudcache@0.4.2,nf-codecommit@0.2.2,nf-console@1.1.4,nf-google@1.15.2,nf-tower@1.9.3,nf-wave@1.7.4
Jul-02 09:59:47.993 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Jul-02 09:59:47.994 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Jul-02 09:59:47.996 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.12.0 in 'deployment' mode
Jul-02 09:59:48.005 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Jul-02 09:59:48.022 [main] DEBUG nextflow.config.ConfigBuilder - Found config base: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config
Jul-02 09:59:48.026 [main] DEBUG nextflow.config.ConfigBuilder - User config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config
Jul-02 09:59:48.026 [main] DEBUG nextflow.config.ConfigBuilder - User config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/tests/nextflow.config
Jul-02 09:59:48.027 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config
Jul-02 09:59:48.028 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/nextflow.config
Jul-02 09:59:48.028 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/tests/nextflow.config
Jul-02 09:59:48.060 [main] DEBUG n.secret.LocalSecretsProvider - Secrets store: /user/gent/446/vsc44685/.nextflow/secrets/store.json
Jul-02 09:59:48.063 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@411291e5] - activable => nextflow.secret.LocalSecretsProvider@411291e5
Jul-02 09:59:48.080 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `test`
Jul-02 09:59:49.597 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `test`
Jul-02 09:59:49.996 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `test`
Jul-02 09:59:50.025 [main] DEBUG nextflow.config.ConfigBuilder - Available config profiles: [bih, cfc_dev, uzl_omics, ifb_core, embl_hd, denbi_qbic, alice, mjolnir_globe, uppmax, giga, incliva, ilifu, ki_luria, uge, icr_alma, rosalind_uge, lugh, mccleary, unibe_ibu, vai, czbiohub_aws, jax, roslin, tes, scw, unc_longleaf, tigem, tubingen_apg, google, apollo, ipop_up, vsc_calcua, pdc_kth, googlels, ceci_nic5, ccga_cau, humantechnopole, stjude, daisybio, eddie, medair, biowulf, apptainer, bi, bigpurple, adcra, cedars, pawsey_setonix, vsc_kul_uhasselt, pawsey_nimbus, ucl_myriad, utd_ganymede, charliecloud, fred_hutch, seattlechildrens, icr_davros, ceres, arm, munin, rosalind, hasta, cfc, uzh, shu_bmrc, ebi_codon_slurm, ebc, ccga_dx, crick, ku_sund_danhead, marvin, shifter, biohpc_gen, mana, mamba, york_viking, unc_lccc, wehi, awsbatch, wustl_htcf, arcc, ceci_dragon2, imperial, maestro, test_local, software_license, cannon, genotoul, nci_gadi, abims, eva_grace, janelia, nu_genomics, googlebatch, oist, sahmri, kaust, alliance_canada, mpcdf, leicester, vsc_ugent, create, sage, cambridge, jex, podman, ebi_codon, cheaha, xanadu, nyu_hpc, test, marjorie, computerome, ucd_sonic, seg_globe, mssm, sanger, dkfz, bluebear, pasteur, einstein, ethz_euler, m3c, test_full, imb, ucl_cscluster, tuos_stanage, azurebatch, hki, seadragon, crukmi, csiro_petrichor, qmul_apocrita, wave, docker, engaging, gis, hypatia, psmn, eva, unity, cropdiversityhpc, nygc, fgcz, conda, crg, singularity, test_s3, mpcdf_viper, pe2, self_hosted_runner, tufts, uw_hyak_pedslabs, binac2, debug, genouest, cbe, unsw_katana, utd_juno, gitpod, phoenix, seawulf, uod_hpc, fub_curta, uct_hpc, aws_tower, binac, fsu_draco]
Jul-02 09:59:50.060 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declaration
Jul-02 09:59:50.072 [main] INFO  nextflow.cli.CmdRun - Launching `/kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test-7f7afc5ad754304c7a086a3d183c3606.nf` [nice_blackwell] DSL2 - revision: 3a3713a948
Jul-02 09:59:50.073 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins declared=[nf-schema@2.2.0]
Jul-02 09:59:50.074 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Jul-02 09:59:50.074 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[nf-schema@2.2.0]
Jul-02 09:59:50.075 [main] DEBUG nextflow.plugin.PluginUpdater - Installing plugin nf-schema version: 2.2.0
Jul-02 09:59:50.082 [main] INFO  org.pf4j.AbstractPluginManager - Plugin 'nf-schema@2.2.0' resolved
Jul-02 09:59:50.082 [main] INFO  org.pf4j.AbstractPluginManager - Start plugin 'nf-schema@2.2.0'
Jul-02 09:59:50.087 [main] DEBUG nextflow.plugin.BasePlugin - Plugin started nf-schema@2.2.0
Jul-02 09:59:50.125 [main] DEBUG nextflow.Session - Session UUID: 2ce1c98b-c4ba-433d-9bdd-f614c8c0c2bd
Jul-02 09:59:50.126 [main] DEBUG nextflow.Session - Run name: nice_blackwell
Jul-02 09:59:50.126 [main] DEBUG nextflow.Session - Executor pool size: 6
Jul-02 09:59:50.132 [main] DEBUG nextflow.file.FilePorter - File porter settings maxRetries=3; maxTransfers=50; pollTimeout=null
Jul-02 09:59:50.135 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=18; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Jul-02 09:59:50.149 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 24.10.2 build 5932
  Created: 27-11-2024 21:23 UTC (22:23 CEST)
  System: Linux 5.14.0-427.66.1.el9_4.x86_64
  Runtime: Groovy 4.0.23 on OpenJDK 64-Bit Server VM 21.0.7+6-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 275517@node3905.accelgor.os [10.141.9.135]
  CPUs: 6 - Mem: 503 GB (374 GB) - Swap: 20 GB (19.3 GB)
Jul-02 09:59:50.167 [main] DEBUG nextflow.Session - Work-dir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work [gpfs]
Jul-02 09:59:50.215 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[]
Jul-02 09:59:50.222 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Jul-02 09:59:50.253 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Jul-02 09:59:50.260 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 7; maxThreads: 1000
Jul-02 09:59:50.318 [main] DEBUG nextflow.Session - Session start
Jul-02 09:59:50.320 [main] DEBUG nextflow.trace.TraceFileObserver - Workflow started -- trace file: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/meta/trace.csv
Jul-02 09:59:50.479 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Jul-02 09:59:50.777 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:gpu_process` matches labels `gpu_process` for process with name Decode_batch
Jul-02 09:59:50.780 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:Decode_batch` matches process Decode_batch
Jul-02 09:59:50.799 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jul-02 09:59:50.799 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jul-02 09:59:50.804 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Jul-02 09:59:50.809 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=6; memory=503 GB; capacity=6; pollInterval=100ms; dumpInterval=5m
Jul-02 09:59:50.810 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: local)
Jul-02 09:59:50.873 [main] DEBUG nextflow.Session - Config process names validation disabled as requested
Jul-02 09:59:50.873 [main] DEBUG nextflow.Session - Igniting dataflow network (1)
Jul-02 09:59:50.874 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > Decode_batch
Jul-02 09:59:50.874 [main] DEBUG nextflow.script.ScriptRunner - Parsed script files:
  Script_16d9520233b78724: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/modules/local/Decoding/tests/../main.nf
  Script_7dbd3bb93aff494f: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test-7f7afc5ad754304c7a086a3d183c3606.nf
Jul-02 09:59:50.874 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Jul-02 09:59:50.874 [main] DEBUG nextflow.Session - Session await
Jul-02 09:59:51.004 [FileTransfer-1] DEBUG nextflow.file.FilePorter - Copying foreign file https://raw.githubusercontent.com/francops1722/test-datasets/panoramaseq/testdata/decode/S09.umi_extract_1.fastq.gz to work dir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/stage-2ce1c98b-c4ba-433d-9bdd-f614c8c0c2bd/29/af4ed1983656b8c355c449baebed37/S09.umi_extract_1.fastq.gz
Jul-02 09:59:51.004 [FileTransfer-2] DEBUG nextflow.file.FilePorter - Copying foreign file https://raw.githubusercontent.com/francops1722/test-datasets/panoramaseq/testdata/decode/S09.umi_extract_2.fastq.gz to work dir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/stage-2ce1c98b-c4ba-433d-9bdd-f614c8c0c2bd/ff/d4c5e0d295a366d97e087206a9fc59/S09.umi_extract_2.fastq.gz
Jul-02 09:59:51.005 [FileTransfer-3] DEBUG nextflow.file.FilePorter - Copying foreign file https://raw.githubusercontent.com/francops1722/test-datasets/panoramaseq/testdata/barcodes_coords.csv to work dir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/stage-2ce1c98b-c4ba-433d-9bdd-f614c8c0c2bd/67/32d924509b951e9710bc897c1ca6fb/barcodes_coords.csv
Jul-02 09:59:51.124 [Actor Thread 5] DEBUG nextflow.container.SingularityCache - Singularity found local store for image=docker://pytorch/pytorch:2.7.1-cuda11.8-cudnn9-runtime; path=/user/gent/446/vsc44685/ScratchVO_dir/apptainer_cache/pytorch-pytorch-2.7.1-cuda11.8-cudnn9-runtime.img
Jul-02 09:59:51.193 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jul-02 09:59:51.195 [Task submitter] INFO  nextflow.Session - [b5/910a6e] Submitted process > Decode_batch (S09_real)
Jul-02 10:00:04.563 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: Decode_batch (S09_real); status: COMPLETED; exit: 1; error: -; workDir: /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/b5/910a6ee60ce02b50afd12bff2a3219]
Jul-02 10:00:04.564 [Task monitor] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'TaskFinalizer' minSize=10; maxSize=18; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Jul-02 10:00:04.571 [TaskFinalizer-1] DEBUG nextflow.processor.TaskProcessor - Handling unexpected condition for
  task: name=Decode_batch (S09_real); work-dir=/kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/b5/910a6ee60ce02b50afd12bff2a3219
  error [nextflow.exception.ProcessFailedException]: Process `Decode_batch (S09_real)` terminated with an error exit status (1)
Jul-02 10:00:04.585 [TaskFinalizer-1] ERROR nextflow.processor.TaskProcessor - Error executing process > 'Decode_batch (S09_real)'

Caused by:
  Process `Decode_batch (S09_real)` terminated with an error exit status (1)


Command executed:

  echo CUDA_VISIBLE_DEVICES=${CUDA_VISIBLE_DEVICES:-}
      python -c "import torch; print('torch.cuda.is_available():', torch.cuda.is_available())"
      Demux2_batch.py -R1 S09.umi_extract_1.fastq.gz -R2 S09.umi_extract_2.fastq.gz -N 34500 -M 36 -B barcodes_coords.csv --Ntriage 100 --Nthresh 9 --out-prefix S09_real -C 0 --Seg_id 1/2 &
  pid0=$!
  Demux2_batch.py -R1 S09.umi_extract_1.fastq.gz -R2 S09.umi_extract_2.fastq.gz -N 34500 -M 36 -B barcodes_coords.csv --Ntriage 100 --Nthresh 9 --out-prefix S09_real -C 1 --Seg_id 2/2 &
  pid1=$!
      wait $pid0
  wait $pid1
      cat *2_R1.fastq.gz > S09_real.decode.R1.fastq.gz
      cat *2_R2.fastq.gz > S09_real.decode.R2.fastq.gz
      rm -f *2_R1.fastq.gz *2_R2.fastq.gz
      
      cat <<-END_VERSIONS > versions.yml
      "Decode_batch":
          python: $(python --version | sed 's/Python //')
          torch: $(python -c "import torch; print(torch.__version__)")
  END_VERSIONS

Command exit status:
  1

Command output:
  CUDA_VISIBLE_DEVICES=
  torch.cuda.is_available(): False
  Defining Functions
  popcll_torch not found, so using slower popcount
  all functions now defined.
  all functions now defined.
  arguments parsed
  finished making code auxilliary tables, now pickling
  moving to CUDA device
  Defining Functions
  popcll_torch not found, so using slower popcount
  all functions now defined.
  all functions now defined.
  arguments parsed
  finished making code auxilliary tables, now pickling
  moving to CUDA device

Command error:
  INFO:    Environment variable SINGULARITYENV_TMPDIR is set, but APPTAINERENV_TMPDIR is preferred
  INFO:    Environment variable SINGULARITYENV_NXF_TASK_WORKDIR is set, but APPTAINERENV_NXF_TASK_WORKDIR is preferred
  INFO:    Environment variable SINGULARITYENV_NXF_DEBUG is set, but APPTAINERENV_NXF_DEBUG is preferred
  CUDA_VISIBLE_DEVICES=
  torch.cuda.is_available(): False
  Defining Functions
  popcll_torch not found, so using slower popcount
  all functions now defined.
  all functions now defined.
  arguments parsed
  finished making code auxilliary tables, now pickling
  moving to CUDA device
  Traceback (most recent call last):
    File "/kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/bin/Demux2_batch.py", line 269, in <module>
      raise RuntimeError("Required GPU not found! Exiting.")
  RuntimeError: Required GPU not found! Exiting.
  Defining Functions
  popcll_torch not found, so using slower popcount
  all functions now defined.
  all functions now defined.
  arguments parsed
  finished making code auxilliary tables, now pickling
  moving to CUDA device
  Traceback (most recent call last):
    File "/kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/bin/Demux2_batch.py", line 269, in <module>
      raise RuntimeError("Required GPU not found! Exiting.")
  RuntimeError: Required GPU not found! Exiting.

Work dir:
  /kyukon/scratch/gent/vo/000/gvo00027/vsc44685/panoramaseq/nf-core-panoramaseq/.nf-test/tests/7f7afc5ad754304c7a086a3d183c3606/work/b5/910a6ee60ce02b50afd12bff2a3219

Container:
  /user/gent/446/vsc44685/ScratchVO_dir/apptainer_cache/pytorch-pytorch-2.7.1-cuda11.8-cudnn9-runtime.img

Tip: view the complete command output by changing to the process work dir and entering the command `cat .command.out`
Jul-02 10:00:04.588 [main] DEBUG nextflow.Session - Session await > all processes finished
Jul-02 10:00:04.596 [TaskFinalizer-1] INFO  nextflow.Session - Execution cancelled -- Finishing pending tasks before exit
Jul-02 10:00:04.601 [Task monitor] DEBUG n.processor.TaskPollingMonitor - <<< barrier arrives (monitor: local) - terminating tasks monitor poll loop
Jul-02 10:00:04.602 [main] DEBUG nextflow.Session - Session await > all barriers passed
Jul-02 10:00:04.603 [main] DEBUG nextflow.util.ThreadPoolManager - Thread pool 'TaskFinalizer' shutdown completed (hard=false)
Jul-02 10:00:04.610 [main] DEBUG n.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=26.7s; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=2; peakMemory=3 GB; ]
Jul-02 10:00:04.610 [main] DEBUG nextflow.trace.TraceFileObserver - Workflow completed -- saving trace file
Jul-02 10:00:04.611 [main] DEBUG nextflow.trace.ReportObserver - Workflow completed -- rendering execution report
Jul-02 10:00:04.951 [main] DEBUG nextflow.trace.TimelineObserver - Workflow completed -- rendering execution timeline
Jul-02 10:00:05.015 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Jul-02 10:00:05.023 [main] INFO  org.pf4j.AbstractPluginManager - Stop plugin 'nf-schema@2.2.0'
Jul-02 10:00:05.023 [main] DEBUG nextflow.plugin.BasePlugin - Plugin stopped nf-schema
Jul-02 10:00:05.024 [main] DEBUG nextflow.util.ThreadPoolManager - Thread pool 'FileTransfer' shutdown completed (hard=false)
Jul-02 10:00:05.024 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
